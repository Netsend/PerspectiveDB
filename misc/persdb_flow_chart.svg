<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" width="769px" height="444px" version="1.1"><defs/><g transform="translate(0.5,0.5)"><rect x="57" y="220" width="120" height="195" rx="18" ry="18" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(57,222)"><switch><foreignObject pointer-events="all" width="119" height="194" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 117px; height: 192px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong>Privileged<br /></strong></p><hr />access password<br />database and fork<br />databases<br /><br /><hr />verify auth request<br /><br />pass authticated<br />requests to db<br />child or disconnect</div></foreignObject><text x="60" y="103" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="262" y="11" width="110" height="130" rx="16.5" ry="16.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(262,13)"><switch><foreignObject pointer-events="all" width="109" height="129" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 107px; height: 127px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong><br /></strong></p><hr />access local<br />database only<br /></div></foreignObject><text x="55" y="71" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><path d="M 177 284.95 L 197 284.95 Q 207 284.95 217 284.95 L 378.76 284.93" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 384.76 284.93 L 376.76 288.93 L 378.76 284.93 L 376.76 280.93 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 177 259 L 182 259 Q 187 259 187 249 L 187 119 Q 187 109 197 109 L 253.76 109" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 259.76 109 L 251.76 113 L 253.76 109 L 251.76 105 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="222" y="174">fork dbs</text></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="97" y="170">send data request and</text><text x="97" y="184">authenticated connection</text><text x="97" y="198"> socket to the requested db</text></g><rect x="387" y="223" width="170" height="218" rx="25.5" ry="25.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(387,225)"><switch><foreignObject pointer-events="all" width="169" height="217" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 167px; height: 215px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong>Unprivileged</strong></p><hr />pre-auth, handle incoming<br />connections over TCP<br />and/or Websocket <br /><br />parse incoming data as<br />newline separated JSON<br />objects<br /><br />expect exactly one valid<br />auth request at the <br />start of a connection<br /></div></foreignObject><text x="85" y="115" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="287" y="380">send auth request and </text><text x="287" y="394">connection socket</text></g><g transform="translate(607,1)"><switch><foreignObject pointer-events="all" width="162" height="162" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 160px; height: 160px; overflow: hidden; white-space: nowrap;"><table width="100%" cellpadding="4" border="1" style="width: 100% ; height: 100% ; border-collapse: collapse"><tbody><tr><th align="center"><b>Auth request<br /></b></th></tr><tr align="left"><td><ul><li>username</li><li>password</li><li>db</li><li>offset</li></ul></td></tr><tr><td align="center"><br /></td></tr></tbody></table></div></foreignObject><text x="81" y="87" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="287" y="302">fork unprivileged connection</text><text x="287" y="316">handler</text></g><path d="M 387 365 L 287 365 Q 277 365 267 365 L 185.24 365" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 179.24 365 L 187.24 361 L 185.24 365 L 187.24 369 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 57 372 Q -13 265 32 150 Q 77 35 253.77 43.6" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 259.77 43.89 L 251.58 47.5 L 253.77 43.6 L 251.97 39.51 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 392 135 L 467 135 Q 477 135 477 145 L 477 214.76" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 477 220.76 L 473 212.76 L 477 214.76 L 481 212.76 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="492" y="109">send auth request</text><text x="492" y="123">to a remote</text></g><rect x="272" y="21" width="110" height="130" rx="16.5" ry="16.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(272,23)"><switch><foreignObject pointer-events="all" width="109" height="129" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 107px; height: 127px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong><br /></strong></p><hr />access local<br />database only<br /></div></foreignObject><text x="55" y="71" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="282" y="31" width="110" height="130" rx="16.5" ry="16.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(282,33)"><switch><foreignObject pointer-events="all" width="109" height="129" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 107px; height: 127px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong>db privileged</strong></p><hr />access local<br />database only<br /><br />setup auth/data<br />requests to other<br />locations<br /></div></foreignObject><text x="55" y="71" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><g transform="translate(607,205)"><switch><foreignObject pointer-events="all" width="162" height="168" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 160px; height: 166px; overflow: hidden; white-space: nowrap;"><table width="100%" cellpadding="4" border="1" style="width: 100% ; height: 100% ; border-collapse: collapse"><tbody><tr><th align="center"><b>Data request<br /></b></th></tr><tr align="left"><td><ul><li>[filter]</li><li>[hooks]</li><li>[hooksOpts]</li><li>[offset]</li></ul></td></tr><tr><td align="center"><br /></td></tr></tbody></table></div></foreignObject><text x="81" y="90" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g></g></svg>