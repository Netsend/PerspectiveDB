<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" width="769px" height="435px" version="1.1"><defs/><g transform="translate(0.5,0.5)"><rect x="57" y="211" width="120" height="195" rx="18" ry="18" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(57,213)"><switch><foreignObject pointer-events="all" width="119" height="194" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 117px; height: 192px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong>Privileged<br /></strong></p><hr />access password<br />database and fork<br />databases<br /><br /><hr />verify auth request<br />disconnect or<br />pass authticated<br />request to db<br />child<br /></div></foreignObject><text x="60" y="103" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="262" y="2" width="110" height="130" rx="16.5" ry="16.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(262,4)"><switch><foreignObject pointer-events="all" width="109" height="129" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 107px; height: 127px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong><br /></strong></p><hr />access local<br />database only<br /></div></foreignObject><text x="55" y="71" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><path d="M 177 275.95 L 197 275.95 Q 207 275.95 217 275.95 L 378.76 275.93" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 384.76 275.93 L 376.76 279.93 L 378.76 275.93 L 376.76 271.93 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 177 250 L 182 250 Q 187 250 187 240 L 187 110 Q 187 100 197 100 L 253.76 100" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 259.76 100 L 251.76 104 L 253.76 100 L 251.76 96 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="246.5" y="177">fork dbs + send</text><text x="246.5" y="191">perspective configs:</text><text x="246.5" y="205">import/export filter,</text><text x="246.5" y="219">hooks, hide</text></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="107" y="126">send stripped auth</text><text x="107" y="140">request and connection</text><text x="107" y="154"> socket to the requested db</text></g><rect x="387" y="214" width="170" height="218" rx="25.5" ry="25.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(387,216)"><switch><foreignObject pointer-events="all" width="169" height="217" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 167px; height: 215px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong>Unprivileged</strong></p><hr />pre-auth, handle incoming<br />connections over TCP<br />and/or Websocket <br /><br />parse incoming data as<br />newline separated JSON<br />objects<br /><br />expect exactly one valid<br />auth request at the <br />start of a connection<br /></div></foreignObject><text x="85" y="115" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="287" y="371">send auth request and </text><text x="287" y="385">connection socket</text></g><g transform="translate(607,69)"><switch><foreignObject pointer-events="all" width="162" height="162" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 160px; height: 160px; overflow: hidden; white-space: nowrap;"><table width="100%" cellpadding="4" border="1" style="width: 100% ; height: 100% ; border-collapse: collapse"><tbody><tr><th align="center"><b>Auth request<br /></b></th></tr><tr align="left"><td><ul><li>username</li><li>password</li><li>db</li><li>[offset]</li></ul></td></tr><tr><td align="center"><br /></td></tr></tbody></table></div></foreignObject><text x="81" y="87" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(607,259)"><switch><foreignObject pointer-events="all" width="162" height="102" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 160px; height: 100px; overflow: hidden; white-space: nowrap;"><table width="100%" cellpadding="4" border="1" style="width: 100% ; height: 100% ; border-collapse: collapse"><tbody><tr><th align="center"><b>Auth response<br /></b></th></tr><tr align="left"><td><ul><li>start {String|Bool}<br /></li></ul></td></tr><tr><td align="center"><br /></td></tr></tbody></table></div></foreignObject><text x="81" y="57" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="287" y="293">fork unprivileged connection</text><text x="287" y="307">handler</text></g><path d="M 387 356 L 287 356 Q 277 356 267 356 L 185.24 356" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 179.24 356 L 187.24 352 L 185.24 356 L 187.24 360 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 57 363 Q -13 256 32 141 Q 77 26 253.77 34.6" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 259.77 34.89 L 251.58 38.5 L 253.77 34.6 L 251.97 30.51 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 392 126 L 467 126 Q 477 126 477 136 L 477 205.76" fill="none" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 477 211.76 L 473 203.76 L 477 205.76 L 481 203.76 Z" fill="#990000" stroke="#990000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="482" y="85">send auth request</text><text x="482" y="99">to a remote + parse</text><text x="482" y="113">auth response</text></g><rect x="272" y="12" width="110" height="130" rx="16.5" ry="16.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(272,14)"><switch><foreignObject pointer-events="all" width="109" height="129" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 107px; height: 127px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong><br /></strong></p><hr />access local<br />database only<br /></div></foreignObject><text x="55" y="71" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="282" y="22" width="110" height="130" rx="16.5" ry="16.5" fill="#e6ffcc" stroke="#000000" stroke-width="3" pointer-events="none"/><g transform="translate(282,24)"><switch><foreignObject pointer-events="all" width="109" height="129" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 107px; height: 127px; overflow: hidden; white-space: nowrap; font-weight: bold; text-align: center;"><p style="margin: 0px ; margin-top: 4px ; text-align: center ; text-decoration: underline"><strong>db privileged</strong></p><hr />access local<br />database only<br /><br />setup auth<br />requests to<br />other locations<br /></div></foreignObject><text x="55" y="71" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g></g></svg>